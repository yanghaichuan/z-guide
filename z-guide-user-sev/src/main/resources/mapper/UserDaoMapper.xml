<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yhc.example.zguide.user.sev.dao.UserDaoMapper">

    <sql id="Base_Column_List">
        	`id`,
			`login_name` as loginName,
			`real_name` as realName,
			`phone`,
			`cardId`,
			`user_type` as userType,
			`state`,
			`email`,
			`address`,
			`input_time` as inputTime,
			`input_man` as inputMan,
			`update_time` as updateTime,
			`update_man` as updateMan,
			`valid_time` as validTime
    </sql>

    <select id="list" resultType="com.yhc.example.zguide.user.api.mode.UserEntity" parameterType="java.util.Map">
        select
        <include refid="Base_Column_List"/>
        from z_user
        <where>
            <if test="login_name !=null">and login_name = #{loginName}</if>
            <if test="real_name !=null">and real_name like concat('%',#{realName},'%')</if>
        </where>
    </select>

    <select id="get" resultType="com.yhc.example.zguide.user.api.mode.UserEntity">
        select
        <include refid="Base_Column_List"/>
        from z_user
        where id = #{id}
    </select>

    <update id="update" parameterType="com.yhc.example.zguide.user.api.mode.UserEntity">
        UPDATE `z_guide_user`.`z_user`
            <set>
                <if test="loginName != null">`login_name` = #{loginName}, </if>
                <if test="password != null">`password` = #{password}, </if>
                <if test="realName != null">`real_name` = #{realName}, </if>
                <if test="phone != null">`phone` = #{phone}, </if>
                <if test="cardid != null">`cardId` = #{cardid}, </if>
                <if test="userType != null">`user_type` = #{userType}, </if>
                <if test="state != null">`state` = #{state}, </if>
                <if test="email != null">`email` = #{email}, </if>
                <if test="address != null">`address` = #{address}, </if>
                <if test="inputTime != null">`input_time` = #{inputTime}, </if>
                <if test="inputMan != null">`input_man` = #{inputMan}, </if>
                <if test="updateTime != null">`update_time` = #{updateTime}, </if>
                <if test="updateMan != null">`update_man` = #{updateMan}, </if>
                <if test="validTime != null">`valid_time` = #{validTime}</if>
            </set>
            WHERE
                `id` = #{id}
    </update>

    <insert id="save">
		INSERT INTO z_user (
			`login_name`,
			`password`,
			`real_name`,
			`phone`,
			`cardId`,
			`user_type`,
			`state`,
			`email`,
			`address`,
			`input_time`,
			`input_man`,
			`update_time`,
			`update_man`,
			`valid_time`
		)
		VALUES (
			#{loginName},
			#{password},
			#{realName},
			#{phone},
			#{cardid},
			#{userType},
			#{state},
			#{email},
			#{address},
			#{inputTime},
			#{inputMan},
			#{updateTime},
			#{updateMan},
			#{validTime}
		)
	</insert>

</mapper>